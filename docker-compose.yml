services:
  openspartan-graph:
    build: .
    ports:
      - "8501:8501"
    environment:
      # Optionnel: forcer une base explicite (sinon sélection via profils/UI)
      # - OPENSPARTAN_DB=/app/data/players/MonGamertag/stats.duckdb
      - OPENSPARTAN_ROOT=/app
    volumes:
      # Données v4 (DuckDB/Parquet) en lecture/écriture
      - ./data:/app/data
      # Configuration persistante (bind mounts)
      # IMPORTANT: ces fichiers doivent exister côté hôte AVANT le premier up.
      # Lancer `bash scripts/docker_init.sh` si premier déploiement.
      - ./db_profiles.json:/app/db_profiles.json
      - ./app_settings.json:/app/app_settings.json

    restart: unless-stopped
