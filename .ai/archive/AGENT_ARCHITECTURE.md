# Architecture des Agents IA - OpenSpartan Graph

> Documentation complÃ¨te du systÃ¨me d'agents, serveurs MCP et hooks configurÃ©s.
> 
> **Pour les novices** : Ce document explique comment l'IA (Claude) est configurÃ©e pour travailler efficacement sur ce projet. L'IA peut utiliser des "agents" (des versions spÃ©cialisÃ©es d'elle-mÃªme) pour accomplir diffÃ©rentes tÃ¢ches en parallÃ¨le.

---

## Table des MatiÃ¨res

1. [Vue d'Ensemble](#vue-densemble)
2. [Concepts de Base pour Novices](#concepts-de-base-pour-novices)
3. [Sous-Agents (Task Tool)](#1-sous-agents-task-tool)
4. [Agents SpÃ©cialisÃ©s (Commandes)](#2-agents-spÃ©cialisÃ©s-cursorcommands)
5. **[Orchestration Multi-Agent AvancÃ©e](#3-orchestration-multi-agent-avancÃ©e)** â† NOUVEAU
6. [Serveurs MCP](#4-serveurs-mcp-model-context-protocol)
7. [Pre-commit Hooks](#5-pre-commit-hooks)
8. [Fichiers de Contexte Agentique](#6-fichiers-de-contexte-agentique-ai)

---

## Vue d'Ensemble

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           CURSOR IDE                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                 PM ORCHESTRATOR (Claude Opus)                         â”‚   â”‚
â”‚  â”‚                      /pm pour activer                                 â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚   â”‚  Commandes  â”‚   â”‚ Sub-Agents  â”‚   â”‚    Serveurs MCP         â”‚   â”‚   â”‚
â”‚  â”‚   â”‚   Custom    â”‚   â”‚  (Sonnet)   â”‚   â”‚                         â”‚   â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚          â”‚                 â”‚                       â”‚                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚             â”‚                 â”‚                       â”‚                      â”‚
â”‚             â–¼                 â–¼                       â–¼                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  .cursor/commands â”‚  â”‚  Sub-Agents x6    â”‚  â”‚     MCP Servers        â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ /pm          â”‚  â”‚  â”œâ”€â”€ tdd-discoveryâ”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ /plan        â”‚  â”‚  â”œâ”€â”€ security     â”‚  â”‚  â”‚ DuckDB  â”‚           â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ /review      â”‚  â”‚  â”œâ”€â”€ devils-adv.  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚    â”‚
â”‚  â”‚  â””â”€â”€ ...          â”‚  â”‚  â””â”€â”€ ...          â”‚  â”‚                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              DONNÃ‰ES                                         â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚         â”‚ SQLite  â”‚      â”‚ Parquet â”‚      â”‚   Navigateur    â”‚               â”‚
â”‚         â”‚metadata â”‚      â”‚ matchs  â”‚      â”‚   (testing)     â”‚               â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Concepts de Base pour Novices

### Qu'est-ce qu'un Agent IA ?

Un **agent IA** est un assistant intelligent (comme Claude) configurÃ© pour accomplir une tÃ¢che spÃ©cifique. Imaginez-le comme un employÃ© virtuel avec des compÃ©tences dÃ©finies.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ANALOGIE : UNE ENTREPRISE                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   VOUS (le dÃ©veloppeur)                                          â”‚
â”‚       â”‚                                                          â”‚
â”‚       â–¼                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚   â”‚  Chef de Projet â”‚  â† PM Orchestrator (Claude Opus)           â”‚
â”‚   â”‚     (PM)        â”‚     Planifie, dÃ©lÃ¨gue, valide              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚            â”‚                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚   â–¼        â–¼        â–¼            â–¼            â–¼                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚ â”‚Dev 1â”‚ â”‚Dev 2â”‚ â”‚Testeur  â”‚ â”‚SÃ©curitÃ© â”‚ â”‚Doc Writerâ”‚           â”‚
â”‚ â”‚     â”‚ â”‚     â”‚ â”‚         â”‚ â”‚         â”‚ â”‚          â”‚           â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                  â”‚
â”‚   â†‘ Ces "employÃ©s" sont des sub-agents (Claude Sonnet)          â”‚
â”‚     Ils travaillent en parallÃ¨le sur des tÃ¢ches spÃ©cifiques     â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Pourquoi utiliser plusieurs agents ?

| ProblÃ¨me avec 1 seul agent | Solution multi-agents |
|---------------------------|----------------------|
| Contexte limitÃ© (mÃ©moire) | Chaque agent a son propre contexte |
| Lenteur sur grosses tÃ¢ches | Travail en parallÃ¨le (6 agents simultanÃ©s) |
| Perte de focus | Chaque agent = 1 spÃ©cialitÃ© |
| Erreurs non dÃ©tectÃ©es | Revues croisÃ©es (devils-advocate) |

### Les ModÃ¨les d'IA UtilisÃ©s

| ModÃ¨le | Surnom | RÃ´le | Analogie |
|--------|--------|------|----------|
| **Claude Opus** | "Big Brain" | PM, Orchestration, DÃ©cisions complexes | Chef de projet senior |
| **Claude Sonnet** | "Fast Worker" | ExÃ©cution de tÃ¢ches, Code | DÃ©veloppeur expÃ©rimentÃ© |

**RÃ¨gle** : Opus planifie et supervise, Sonnet exÃ©cute.

### C'est quoi une "Commande Slash" ?

Une commande qui commence par `/` et dÃ©clenche un workflow prÃ©dÃ©fini.

```
Vous tapez:    /pm
L'IA devient:  Un chef de projet qui orchestre des sub-agents

Vous tapez:    /review --fagan
L'IA devient:  Un inspecteur de code mÃ©thodique
```

**Commandes principales** :
- `/pm` - Active le mode PM Orchestrator
- `/plan` - Planifie une tÃ¢che
- `/implement` - ImplÃ©mente du code
- `/test` - GÃ©nÃ¨re/exÃ©cute des tests
- `/review` - Revue de code
- `/debug` - Investigation de bugs

### C'est quoi la "MÃ©thodologie Fagan" ?

Une mÃ©thode de revue de code inventÃ©e chez IBM en 1976, toujours utilisÃ©e aujourd'hui car trÃ¨s efficace.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REVUE FAGAN SIMPLIFIÃ‰E                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  1. PLANIFICATION    â†’ Identifier ce qu'on va revoir            â”‚
â”‚  2. VUE D'ENSEMBLE   â†’ Comprendre le code globalement           â”‚
â”‚  3. PRÃ‰PARATION      â†’ Chaque inspecteur lit individuellement   â”‚
â”‚  4. INSPECTION       â†’ RÃ©union pour lister les dÃ©fauts          â”‚
â”‚  5. CORRECTION       â†’ L'auteur corrige                         â”‚
â”‚  6. SUIVI            â†’ VÃ©rifier que c'est corrigÃ©               â”‚
â”‚                                                                  â”‚
â”‚  Avantage: Trouve 60-90% des bugs AVANT les tests !            â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 1. Sous-Agents (Task Tool)

L'agent principal peut dÃ©lÃ©guer des tÃ¢ches Ã  des sous-agents isolÃ©s et autonomes.

### Architecture de DÃ©lÃ©gation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     AGENT PRINCIPAL                            â”‚
â”‚                     (Claude Opus)                              â”‚
â”‚                                                                â”‚
â”‚   "Explore le systÃ¨me d'authentification ET le cache"         â”‚
â”‚                            â”‚                                   â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚              â”‚      PARALLÃ‰LISATION       â”‚                    â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                            â”‚                                   â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚         â–¼                  â–¼                  â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ Task #1     â”‚   â”‚ Task #2     â”‚    â”‚ Task #3     â”‚         â”‚
â”‚  â”‚ explore     â”‚   â”‚ explore     â”‚    â”‚ general     â”‚         â”‚
â”‚  â”‚ "auth"      â”‚   â”‚ "cache"     â”‚    â”‚ Purpose     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                 â”‚                   â”‚                â”‚
â”‚         â–¼                 â–¼                   â–¼                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚              RÃ‰SULTATS AGRÃ‰GÃ‰S                   â”‚          â”‚
â”‚  â”‚         (retournÃ©s Ã  l'agent principal)          â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Types de Sous-Agents

| Type | ModÃ¨le | Usage | Outils Disponibles |
|------|--------|-------|-------------------|
| `explore` | fast | Exploration codebase, recherche patterns | Grep, Glob, Read, SemanticSearch |
| `generalPurpose` | fast | TÃ¢ches multi-Ã©tapes, modifications | Tous les outils |

### CaractÃ©ristiques d'Isolation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SOUS-AGENT ISOLÃ‰                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ— PAS d'accÃ¨s au contexte de conversation parente         â”‚
â”‚  âœ— PAS d'accÃ¨s aux messages utilisateur                    â”‚
â”‚  âœ“ Propre jeu d'outils (lecture, recherche...)             â”‚
â”‚  âœ“ Peut Ãªtre en mode readonly                              â”‚
â”‚  âœ“ Retourne un rÃ©sumÃ© structurÃ©                            â”‚
â”‚  âœ“ Peut Ãªtre repris via son ID                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Agents SpÃ©cialisÃ©s (`.cursor/commands/`)

Les commandes custom fonctionnent comme des **agents spÃ©cialisÃ©s** avec workflows prÃ©dÃ©finis.

### Architecture HiÃ©rarchique des Agents

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚                          â”‚   /orchestrate    â”‚                              â”‚
â”‚                          â”‚                   â”‚                              â”‚
â”‚                          â”‚  CHEF D'ORCHESTRE â”‚                              â”‚
â”‚                          â”‚  Point d'entrÃ©e   â”‚                              â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                    â”‚                                        â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                    â”‚               â”‚               â”‚                        â”‚
â”‚                    â–¼               â–¼               â–¼                        â”‚
â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚             â”‚ FEATURE  â”‚    â”‚   BUG    â”‚    â”‚ QUESTION â”‚                    â”‚
â”‚             â”‚ nouvelle â”‚    â”‚  Ã  fixer â”‚    â”‚exploration                    â”‚
â”‚             â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                  â”‚               â”‚               â”‚                          â”‚
â”‚                  â–¼               â–¼               â–¼                          â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        CYCLE DE VIE D'UNE FEATURE                           â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚  /plan   â”‚â”€â”€â”€â–¶â”‚/implementâ”‚â”€â”€â”€â–¶â”‚  /test   â”‚â”€â”€â”€â–¶â”‚ /review  â”‚             â”‚
â”‚   â”‚          â”‚    â”‚          â”‚    â”‚          â”‚    â”‚          â”‚             â”‚
â”‚   â”‚ Planifie â”‚    â”‚ Code     â”‚    â”‚ Valide   â”‚    â”‚ QualitÃ©  â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚        â”‚                               â”‚                                    â”‚
â”‚        â”‚                               â–¼                                    â”‚
â”‚        â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚        â”‚                         â”‚  /debug  â”‚                               â”‚
â”‚        â”‚                         â”‚          â”‚                               â”‚
â”‚        â”‚                         â”‚ Si bug   â”‚                               â”‚
â”‚        â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â–¼                                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                      AGENTS DE SUPPORT                                â”‚ â”‚
â”‚   â”‚                                                                       â”‚ â”‚
â”‚   â”‚  /explore-feature  /ingest  /query-halo  /verify-db  /update-context â”‚ â”‚
â”‚   â”‚                                                                       â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                      â”‚
â”‚                                      â–¼                                      â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                              â”‚   /handoff   â”‚                               â”‚
â”‚                              â”‚              â”‚                               â”‚
â”‚                              â”‚  Passation   â”‚                               â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Vue d'Ensemble des Agents

```
.cursor/commands/
    â”‚
    â”œâ”€â”€ ORCHESTRATEUR (Point d'entrÃ©e)
    â”‚   â””â”€â”€ /orchestrate    â†’ ğŸ¯ Analyse et dÃ©lÃ¨gue aux agents appropriÃ©s
    â”‚
    â”œâ”€â”€ AGENTS PRINCIPAUX (Cycle de dÃ©veloppement)
    â”‚   â”œâ”€â”€ /plan           â†’ ğŸ“‹ Planification structurÃ©e
    â”‚   â”œâ”€â”€ /implement      â†’ ğŸ”¨ ImplÃ©mentation avec checklist
    â”‚   â”œâ”€â”€ /test           â†’ ğŸ§ª GÃ©nÃ©ration et exÃ©cution tests
    â”‚   â”œâ”€â”€ /review         â†’ ğŸ” Revue de code qualitÃ©
    â”‚   â””â”€â”€ /debug          â†’ ğŸ› Investigation systÃ©matique
    â”‚
    â”œâ”€â”€ AGENTS DE SUPPORT (OpÃ©rations)
    â”‚   â”œâ”€â”€ /explore-feature â†’ ğŸ—ºï¸ Documentation feature (+ RAG)
    â”‚   â”œâ”€â”€ /rag-search     â†’ ğŸ§  Recherche base de connaissances (NOUVEAU)
    â”‚   â”œâ”€â”€ /ingest         â†’ ğŸ“¥ Ingestion donnÃ©es Halo
    â”‚   â”œâ”€â”€ /query-halo     â†’ ğŸ” RequÃªtes SQL DuckDB
    â”‚   â”œâ”€â”€ /verify-db      â†’ âœ… VÃ©rification intÃ©gritÃ©
    â”‚   â””â”€â”€ /update-context â†’ ğŸ“ MAJ fichiers .ai/
    â”‚
    â””â”€â”€ AGENT DE TRANSITION
        â””â”€â”€ /handoff        â†’ ğŸ”„ Passation entre sessions
```

### Agent RAG Search (NOUVEAU)

#### `/rag-search` - Recherche Base de Connaissances ğŸ§ 

Recherche dans la base vectorielle LanceDB contenant :
- Documentation locale (`docs/`, `.ai/`, `src/`)
- Repository GitHub Grunt (API Halo Infinite)

**Outils MCP** :
- `search_knowledge` : Recherche sÃ©mantique gÃ©nÃ©rale
- `get_api_doc` : Documentation API Halo
- `get_context` : Contexte formatÃ© pour prompts
- `get_stats` : Statistiques de la base

**IntÃ©gration** :
- AppelÃ© automatiquement par `/orchestrate` pour les features liÃ©es Ã  l'API
- AppelÃ© automatiquement par `/explore-feature` avant l'exploration

---

### Agent Orchestrateur

#### `/orchestrate` - Chef d'Orchestre ğŸ¯

L'orchestrateur est le **point d'entrÃ©e unique** pour toute demande complexe.
Il analyse la demande en langage naturel et dÃ©lÃ¨gue aux agents appropriÃ©s.

**Enrichissement RAG** : Avant toute planification, l'orchestrateur peut consulter
le RAG via `get_context` pour obtenir du contexte pertinent sur l'API Halo.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /orchestrate "Ajoute un graphique des mÃ©dailles par session"               â”‚
â”‚                                    â”‚                                         â”‚
â”‚                                    â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                         ANALYSE DE LA DEMANDE                          â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚  1. Lire contexte (.ai/project_map.md, thought_log.md)                 â”‚ â”‚
â”‚  â”‚  2. Classifier la demande                                              â”‚ â”‚
â”‚  â”‚  3. DÃ©terminer le workflow appropriÃ©                                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚                                         â”‚
â”‚                                    â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      CLASSIFICATION                                     â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚   "ajoute", "crÃ©e"  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  FEATURE  â”€â”€â–¶ /plan â†’ /implement       â”‚ â”‚
â”‚  â”‚   "bug", "erreur"   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  BUG      â”€â”€â–¶ /debug â†’ /test           â”‚ â”‚
â”‚  â”‚   "comment", "oÃ¹"   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  QUESTION â”€â”€â–¶ /explore-feature         â”‚ â”‚
â”‚  â”‚   "sync", "import"  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  DONNÃ‰ES  â”€â”€â–¶ /ingest                  â”‚ â”‚
â”‚  â”‚   "requÃªte", "stats"â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  QUERY    â”€â”€â–¶ /query-halo              â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚                                         â”‚
â”‚                                    â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      EXÃ‰CUTION SÃ‰QUENTIELLE                            â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚   /plan â”€â”€â–¶ /implement â”€â”€â–¶ /test â”€â”€â–¶ /review â”€â”€â–¶ /handoff              â”‚ â”‚
â”‚  â”‚                              â”‚                                          â”‚ â”‚
â”‚  â”‚                              â–¼                                          â”‚ â”‚
â”‚  â”‚                        (Ã©chec? /debug)                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚                                         â”‚
â”‚                                    â–¼                                         â”‚
â”‚                        RÃ©sultat + MAJ .ai/                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ParallÃ©lisation** : L'orchestrateur peut lancer plusieurs sous-agents `Task` en parallÃ¨le
pour des explorations indÃ©pendantes :

```
/orchestrate "Explore le cache ET le systÃ¨me de sync"
                          â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â–¼                             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Task        â”‚               â”‚ Task        â”‚
    â”‚ explore     â”‚               â”‚ explore     â”‚
    â”‚ "cache"     â”‚               â”‚ "sync"      â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚                             â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â–¼
                  RÃ©sultats agrÃ©gÃ©s
```

---

### DÃ©tail des Agents Principaux

#### `/plan` - Agent Planification ğŸ“‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /plan "Ajouter support multi-joueurs"                      â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 1. Lire contexte (.ai/project_map.md, thought_log)  â”‚    â”‚
â”‚  â”‚ 2. Analyser fichiers Ã  modifier                     â”‚    â”‚
â”‚  â”‚ 3. Identifier risques et dÃ©pendances                â”‚    â”‚
â”‚  â”‚ 4. GÃ©nÃ©rer .ai/plans/[date]-[sujet].md              â”‚    â”‚
â”‚  â”‚ 5. Attendre validation avant /implement             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚                   PrÃªt pour /implement                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### `/implement` - Agent ImplÃ©mentation ğŸ”¨
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /implement "feature X" ou /implement (reprend le plan)     â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 1. PRÃ‰PARATION                                      â”‚    â”‚
â”‚  â”‚    â–¡ Lire .ai/current_plan.md                       â”‚    â”‚
â”‚  â”‚    â–¡ CrÃ©er branche git si nÃ©cessaire                â”‚    â”‚
â”‚  â”‚    â–¡ VÃ©rifier tests existants passent               â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚ 2. IMPLÃ‰MENTATION (ordre de dÃ©pendance)             â”‚    â”‚
â”‚  â”‚    â–¡ ModÃ¨les Pydantic                               â”‚    â”‚
â”‚  â”‚    â–¡ Infrastructure (DB, Parquet)                   â”‚    â”‚
â”‚  â”‚    â–¡ Repositories                                   â”‚    â”‚
â”‚  â”‚    â–¡ Services/Logic                                 â”‚    â”‚
â”‚  â”‚    â–¡ UI si applicable                               â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚ 3. VALIDATION par fichier                           â”‚    â”‚
â”‚  â”‚    â–¡ Linting OK (ruff)                              â”‚    â”‚
â”‚  â”‚    â–¡ Imports OK                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚                    PrÃªt pour /test                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### `/test` - Agent Tests ğŸ§ª
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /test "module X" ou /test --all                            â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 1. ANALYSE                                          â”‚    â”‚
â”‚  â”‚    â–¡ Identifier fonctions publiques                 â”‚    â”‚
â”‚  â”‚    â–¡ Identifier cas limites (edge cases)            â”‚    â”‚
â”‚  â”‚    â–¡ Identifier dÃ©pendances Ã  mocker                â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚ 2. GÃ‰NÃ‰RATION (si tests n'existent pas)             â”‚    â”‚
â”‚  â”‚    â–¡ CrÃ©er tests/test_[module].py                   â”‚    â”‚
â”‚  â”‚    â–¡ Cas nominal + erreurs + edge cases             â”‚    â”‚
â”‚  â”‚    â–¡ Fixtures et mocks                              â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚ 3. EXÃ‰CUTION                                        â”‚    â”‚
â”‚  â”‚    â–¡ pytest tests/test_xxx.py -v                    â”‚    â”‚
â”‚  â”‚    â–¡ Couverture > 80%                               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚                                   â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚              â–¼                       â–¼                      â”‚
â”‚         âœ“ PASS                  âœ— FAIL                      â”‚
â”‚       /review                   /debug                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### `/review` - Agent Revue de Code ğŸ”
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /review "fichier" ou /review --staged                      â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ CRITÃˆRES DE REVUE                                   â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚ â–¡ QUALITÃ‰                                           â”‚    â”‚
â”‚  â”‚   Nommage, DRY, fonctions courtes, docstrings       â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚ â–¡ ARCHITECTURE                                      â”‚    â”‚
â”‚  â”‚   SÃ©paration responsabilitÃ©s, pas d'imports circ.   â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚ â–¡ SÃ‰CURITÃ‰                                          â”‚    â”‚
â”‚  â”‚   Pas de secrets, validation inputs, SQL safe       â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚ â–¡ PERFORMANCE                                       â”‚    â”‚
â”‚  â”‚   Pas de N+1, Polars vs Pandas, cache               â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚ â–¡ TESTABILITÃ‰                                       â”‚    â”‚
â”‚  â”‚   Fonctions pures, dÃ©pendances mockables            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ RAPPORT                                             â”‚    â”‚
â”‚  â”‚ ğŸ”´ Critiques  â”‚ ğŸŸ¡ AmÃ©liorations  â”‚ ğŸŸ¢ Points +     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### `/debug` - Agent DÃ©bogage ğŸ›
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /debug "description du bug" ou /debug --error "msg"        â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ MÃ‰THODOLOGIE SYSTÃ‰MATIQUE                           â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚ 1. REPRODUCTION                                     â”‚    â”‚
â”‚  â”‚    â–¡ Comportement attendu vs observÃ©                â”‚    â”‚
â”‚  â”‚    â–¡ Ã‰tapes pour reproduire                         â”‚    â”‚
â”‚  â”‚    â–¡ Cas minimal                                    â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚ 2. COLLECTE D'INDICES                               â”‚    â”‚
â”‚  â”‚    â–¡ Traceback complet                              â”‚    â”‚
â”‚  â”‚    â–¡ Contexte d'exÃ©cution                           â”‚    â”‚
â”‚  â”‚    â–¡ DonnÃ©es d'entrÃ©e                               â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚ 3. HYPOTHÃˆSES (par probabilitÃ©)                     â”‚    â”‚
â”‚  â”‚    1. HypothÃ¨se A (plus probable)                   â”‚    â”‚
â”‚  â”‚    2. HypothÃ¨se B                                   â”‚    â”‚
â”‚  â”‚    3. HypothÃ¨se C                                   â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚ 4. INVESTIGATION                                    â”‚    â”‚
â”‚  â”‚    â–¡ Logs, breakpoints, inspection                  â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚ 5. CORRECTION + TEST RÃ‰GRESSION                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚              Retour Ã  /test pour valider                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### DÃ©tail des Agents de Support

#### `/explore-feature` - Documentation Feature ğŸ—ºï¸
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /explore-feature "cache"                                    â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 1. Recherche Grep/Glob                              â”‚    â”‚
â”‚  â”‚ 2. Lecture fichiers clÃ©s                            â”‚    â”‚
â”‚  â”‚ 3. â†’ .ai/features/cache.md                          â”‚    â”‚
â”‚  â”‚ 4. MAJ .ai/project_map.md                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### `/query-halo` - RequÃªtes DuckDB ğŸ”
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /query-halo "Top 10 mÃ©dailles gagnÃ©es"                     â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚            MCP DuckDB Server                         â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚  ATTACH 'metadata.db' AS meta;                      â”‚    â”‚
â”‚  â”‚  SELECT medal, COUNT(*) FROM ...                    â”‚    â”‚
â”‚  â”‚  JOIN meta.medal_definitions ...                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### `/handoff` - Passation Session ğŸ”„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /handoff                                                    â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ GÃ©nÃ¨re dans .ai/thought_log.md :                    â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚ ### 2026-01-31 - Migration Parquet                  â”‚    â”‚
â”‚  â”‚ **Contexte** : Demande initiale                     â”‚    â”‚
â”‚  â”‚ **Raisonnement** : Pourquoi cette approche          â”‚    â”‚
â”‚  â”‚ **DÃ©cision** : Ce qui a Ã©tÃ© fait                    â”‚    â”‚
â”‚  â”‚ **Suivi** : Ce qui reste Ã  faire                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚           Session suivante peut reprendre !                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Orchestration Multi-Agent AvancÃ©e

> **Pour les novices** : Cette section explique comment faire travailler plusieurs IA ensemble de faÃ§on coordonnÃ©e, comme une Ã©quipe de dÃ©veloppement.

### Vue d'Ensemble du SystÃ¨me

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚                         VOUS (le dÃ©veloppeur)                                â”‚
â”‚                              â”‚                                               â”‚
â”‚                              â–¼                                               â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚                        â”‚   /pm    â”‚  â† Commande d'activation                 â”‚
â”‚                        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                          â”‚
â”‚                             â”‚                                                â”‚
â”‚                             â–¼                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚                    PM ORCHESTRATOR (Opus)                            â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚   RÃ´le: Chef de projet senior qui:                                   â”‚   â”‚
â”‚  â”‚   â€¢ Planifie les tÃ¢ches                                              â”‚   â”‚
â”‚  â”‚   â€¢ DÃ©lÃ¨gue aux sub-agents                                           â”‚   â”‚
â”‚  â”‚   â€¢ Consolide les rÃ©sultats                                          â”‚   â”‚
â”‚  â”‚   â€¢ Valide la qualitÃ©                                                â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚   Fichier: .cursor/rules/pm-orchestrator.md                          â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                               â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚              â”‚               â”‚               â”‚                              â”‚
â”‚              â–¼               â–¼               â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚  Sub-Agent 1  â”‚ â”‚  Sub-Agent 2  â”‚ â”‚  Sub-Agent N  â”‚  (max 6 en //)      â”‚
â”‚  â”‚   (Sonnet)    â”‚ â”‚   (Sonnet)    â”‚ â”‚   (Sonnet)    â”‚                     â”‚
â”‚  â”‚               â”‚ â”‚               â”‚ â”‚               â”‚                     â”‚
â”‚  â”‚  TÃ¢che unique â”‚ â”‚  TÃ¢che unique â”‚ â”‚  TÃ¢che unique â”‚                     â”‚
â”‚  â”‚  et prÃ©cise   â”‚ â”‚  et prÃ©cise   â”‚ â”‚  et prÃ©cise   â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚          â”‚                 â”‚                 â”‚                              â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                            â”‚                                                â”‚
â”‚                            â–¼                                                â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚                   â”‚  Rapports       â”‚                                       â”‚
â”‚                   â”‚  consolidÃ©s     â”‚  â†’ Seuls les rapports finaux         â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    restent dans le contexte PM       â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Les 6 Sub-Agents SpÃ©cialisÃ©s

Chaque sub-agent a une expertise prÃ©cise, comme les membres d'une Ã©quipe de dÃ©veloppement :

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ ğŸ§ª TDD-DISCOVERYâ”‚  â”‚ ğŸ—ï¸ REQUIREMENTS â”‚  â”‚ ğŸ“ TECH-DOC     â”‚             â”‚
â”‚  â”‚                 â”‚  â”‚   ARCHITECT     â”‚  â”‚   WRITER        â”‚             â”‚
â”‚  â”‚ Analyse les     â”‚  â”‚                 â”‚  â”‚                 â”‚             â”‚
â”‚  â”‚ tests existants â”‚  â”‚ ConÃ§oit le      â”‚  â”‚ Maintient la    â”‚             â”‚
â”‚  â”‚ avant de coder  â”‚  â”‚ design techniqueâ”‚  â”‚ documentation   â”‚             â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚ Ã  jour          â”‚             â”‚
â”‚  â”‚ "Quels tests    â”‚  â”‚ "Comment        â”‚  â”‚                 â”‚             â”‚
â”‚  â”‚  existent dÃ©jÃ ?"â”‚  â”‚  structurer ?"  â”‚  â”‚ "Qu'est-ce qui  â”‚             â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚  a changÃ© ?"    â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ ğŸ˜ˆ DEVIL'S      â”‚  â”‚ ğŸ”’ SECURITY     â”‚  â”‚ ğŸ” FAGAN        â”‚             â”‚
â”‚  â”‚   ADVOCATE      â”‚  â”‚   SPECIALIST    â”‚  â”‚   INSPECTOR     â”‚             â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚             â”‚
â”‚  â”‚ Challenge le    â”‚  â”‚ Audite la       â”‚  â”‚ Revue de code   â”‚             â”‚
â”‚  â”‚ plan, trouve    â”‚  â”‚ sÃ©curitÃ©,       â”‚  â”‚ formelle selon  â”‚             â”‚
â”‚  â”‚ les failles     â”‚  â”‚ trouve les      â”‚  â”‚ mÃ©thodologie    â”‚             â”‚
â”‚  â”‚                 â”‚  â”‚ vulnÃ©rabilitÃ©s  â”‚  â”‚ IBM             â”‚             â”‚
â”‚  â”‚ "Et si Ã§a       â”‚  â”‚                 â”‚  â”‚                 â”‚             â”‚
â”‚  â”‚  Ã©choue ?"      â”‚  â”‚ "Est-ce sÃ»r ?"  â”‚  â”‚ "Score: X/50"   â”‚             â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| Agent | Fichier Config | Quand l'utiliser |
|-------|----------------|------------------|
| `tdd-discovery` | IntÃ©grÃ© au PM | Avant toute modification de code |
| `requirements-architect` | IntÃ©grÃ© au PM | Pour concevoir une nouvelle feature |
| `tech-doc-writer` | IntÃ©grÃ© au PM | AprÃ¨s chaque changement significatif |
| `devils-advocate` | IntÃ©grÃ© au PM | Avant de valider un plan ou du code |
| `security-specialist` | IntÃ©grÃ© au PM | Pour features sensibles ou audits |
| `fagan-inspector` | `.cursor/rules/fagan-reviewer.md` | Pour revues de code critiques |

### Workflow : Cycle Complet d'Orchestration

Voici comment se dÃ©roule un cycle complet, de l'audit Ã  la validation :

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚   /orchestrate-full                                                          â”‚
â”‚         â”‚                                                                    â”‚
â”‚         â–¼                                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚                      PHASE 1 : AUDIT                               â”‚     â”‚
â”‚   â”‚                      (~30 minutes)                                 â”‚     â”‚
â”‚   â”‚                                                                    â”‚     â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚     â”‚
â”‚   â”‚   â”‚         FAGAN MULTI-ROUNDS (6 agents Ã— 4 rounds)         â”‚     â”‚     â”‚
â”‚   â”‚   â”‚                                                          â”‚     â”‚     â”‚
â”‚   â”‚   â”‚  Round 1: 6 agents inspectent 6 sections du code        â”‚     â”‚     â”‚
â”‚   â”‚   â”‚  Round 2: 6 agents sur les zones non couvertes          â”‚     â”‚     â”‚
â”‚   â”‚   â”‚  Round 3: 6 agents consolident et valident              â”‚     â”‚     â”‚
â”‚   â”‚   â”‚  Round 4: 6 agents Ã©liminent les faux positifs          â”‚     â”‚     â”‚
â”‚   â”‚   â”‚                                                          â”‚     â”‚     â”‚
â”‚   â”‚   â”‚  Pourquoi 4 rounds ? Une seule revue rate ~40% des bugs â”‚     â”‚     â”‚
â”‚   â”‚   â”‚                                                          â”‚     â”‚     â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚     â”‚
â”‚   â”‚                            â”‚                                       â”‚     â”‚
â”‚   â”‚                            â–¼                                       â”‚     â”‚
â”‚   â”‚   Outputs: .ai/reports/audit-final.md                             â”‚     â”‚
â”‚   â”‚            .ai/sprints/backlog.md (liste des issues)              â”‚     â”‚
â”‚   â”‚                                                                    â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚                                                                    â”‚
â”‚         â–¼                                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚                      PHASE 2 : PLANNING                            â”‚     â”‚
â”‚   â”‚                      (~10 minutes)                                 â”‚     â”‚
â”‚   â”‚                                                                    â”‚     â”‚
â”‚   â”‚   PM transforme les issues en "micro-sprints" :                   â”‚     â”‚
â”‚   â”‚                                                                    â”‚     â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚     â”‚
â”‚   â”‚   â”‚  Sprint 001: 6 tÃ¢ches parallÃ¨les (Security fixes)       â”‚     â”‚     â”‚
â”‚   â”‚   â”‚  Sprint 002: 6 tÃ¢ches parallÃ¨les (Critical bugs)        â”‚     â”‚     â”‚
â”‚   â”‚   â”‚  Sprint 003: 6 tÃ¢ches parallÃ¨les (Major issues)         â”‚     â”‚     â”‚
â”‚   â”‚   â”‚  ...                                                     â”‚     â”‚     â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚     â”‚
â”‚   â”‚                                                                    â”‚     â”‚
â”‚   â”‚   RÃ¨gle: Chaque tÃ¢che = 1 fichier ou 1 fonction                   â”‚     â”‚
â”‚   â”‚          Maximum 6 tÃ¢ches par sprint (parallÃ©lisation)            â”‚     â”‚
â”‚   â”‚                                                                    â”‚     â”‚
â”‚   â”‚   Outputs: .ai/sprints/micro-sprints/sprint-001.md, ...           â”‚     â”‚
â”‚   â”‚                                                                    â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚                                                                    â”‚
â”‚         â–¼                                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚                      PHASE 3 : EXÃ‰CUTION                           â”‚     â”‚
â”‚   â”‚                      (variable)                                    â”‚     â”‚
â”‚   â”‚                                                                    â”‚     â”‚
â”‚   â”‚   Pour chaque sprint:                                              â”‚     â”‚
â”‚   â”‚                                                                    â”‚     â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚     â”‚
â”‚   â”‚   â”‚                                                          â”‚     â”‚     â”‚
â”‚   â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚     â”‚     â”‚
â”‚   â”‚   â”‚  â”‚Agent 1 â”‚ â”‚Agent 2 â”‚ â”‚Agent 3 â”‚ â”‚Agent 4 â”‚ â”‚Agent 5 â”‚ â”‚     â”‚     â”‚
â”‚   â”‚   â”‚  â”‚Task A  â”‚ â”‚Task B  â”‚ â”‚Task C  â”‚ â”‚Task D  â”‚ â”‚Doc     â”‚ â”‚     â”‚     â”‚
â”‚   â”‚   â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚     â”‚     â”‚
â”‚   â”‚   â”‚      â”‚          â”‚          â”‚          â”‚          â”‚      â”‚     â”‚     â”‚
â”‚   â”‚   â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚     â”‚     â”‚
â”‚   â”‚   â”‚                         â”‚                                â”‚     â”‚     â”‚
â”‚   â”‚   â”‚                         â–¼                                â”‚     â”‚     â”‚
â”‚   â”‚   â”‚              PM valide le batch                          â”‚     â”‚     â”‚
â”‚   â”‚   â”‚              Tests passent ? â†’ Sprint suivant            â”‚     â”‚     â”‚
â”‚   â”‚   â”‚              Tests Ã©chouent ? â†’ Mini-sprint de fix       â”‚     â”‚     â”‚
â”‚   â”‚   â”‚                                                          â”‚     â”‚     â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚     â”‚
â”‚   â”‚                                                                    â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚                                                                    â”‚
â”‚         â–¼                                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚                      PHASE 4 : VALIDATION                          â”‚     â”‚
â”‚   â”‚                      (~15 minutes)                                 â”‚     â”‚
â”‚   â”‚                                                                    â”‚     â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚     â”‚
â”‚   â”‚   â”‚  1. devils-advocate  â†’ Challenge final                   â”‚     â”‚     â”‚
â”‚   â”‚   â”‚  2. security-specialist â†’ Re-audit sÃ©curitÃ©             â”‚     â”‚     â”‚
â”‚   â”‚   â”‚  3. tdd-discovery â†’ VÃ©rifier couverture tests           â”‚     â”‚     â”‚
â”‚   â”‚   â”‚  4. pytest + ruff â†’ Tests automatiques                  â”‚     â”‚     â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚     â”‚
â”‚   â”‚                                                                    â”‚     â”‚
â”‚   â”‚   CritÃ¨res de succÃ¨s:                                             â”‚     â”‚
â”‚   â”‚   âœ“ 0 dÃ©fauts sÃ©curitÃ© critiques                                  â”‚     â”‚
â”‚   â”‚   âœ“ Tests 100% pass                                               â”‚     â”‚
â”‚   â”‚   âœ“ Couverture â‰¥ 80%                                              â”‚     â”‚
â”‚   â”‚   âœ“ Documentation Ã  jour                                          â”‚     â”‚
â”‚   â”‚                                                                    â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚                                                                    â”‚
â”‚         â–¼                                                                    â”‚
â”‚      TERMINÃ‰ + Mise Ã  jour .ai/thought_log.md                               â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Commandes d'Orchestration

| Commande | Description | Quand l'utiliser |
|----------|-------------|------------------|
| `/pm` | Active le mode PM Orchestrator | Pour toute tÃ¢che complexe |
| `/orchestrate-audit` | Lance un audit multi-rounds | Avant un refactoring majeur |
| `/orchestrate-implement` | ExÃ©cute les micro-sprints | AprÃ¨s avoir planifiÃ© |
| `/orchestrate-full` | Cycle complet (audit â†’ validation) | Pour une grosse feature |

### Concept : Le "Context Management"

**ProblÃ¨me** : Les conversations longues avec l'IA deviennent incohÃ©rentes car le contexte (la "mÃ©moire") se remplit.

**Solution** : Le PM ne garde que les rapports finaux, pas les dÃ©tails.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚   MAUVAISE PRATIQUE (1 seul agent)        BONNE PRATIQUE (PM + sub-agents) â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  Contexte de l'agent:       â”‚         â”‚  Contexte du PM:            â”‚  â”‚
â”‚   â”‚                             â”‚         â”‚                             â”‚  â”‚
â”‚   â”‚  â€¢ Historique complet       â”‚         â”‚  â€¢ Rapport audit âœ“          â”‚  â”‚
â”‚   â”‚  â€¢ Tout le code lu          â”‚         â”‚  â€¢ Rapport security âœ“       â”‚  â”‚
â”‚   â”‚  â€¢ Tentatives Ã©chouÃ©es      â”‚         â”‚  â€¢ Status sprints âœ“         â”‚  â”‚
â”‚   â”‚  â€¢ DÃ©tails de debug         â”‚         â”‚  â€¢ DÃ©cisions clÃ©s âœ“         â”‚  â”‚
â”‚   â”‚  â€¢ Tout le reste...         â”‚         â”‚                             â”‚  â”‚
â”‚   â”‚                             â”‚         â”‚  (Les dÃ©tails restent       â”‚  â”‚
â”‚   â”‚  â†’ CONTEXTE SATURÃ‰          â”‚         â”‚   dans les sub-agents)      â”‚  â”‚
â”‚   â”‚  â†’ INCOHÃ‰RENCE              â”‚         â”‚                             â”‚  â”‚
â”‚   â”‚                             â”‚         â”‚  â†’ CONTEXTE PROPRE          â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â†’ COHÃ‰RENCE MAINTENUE      â”‚  â”‚
â”‚                                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Concept : Les "Micro-Sprints"

**DÃ©finition** : Petites unitÃ©s de travail exÃ©cutables en parallÃ¨le.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚   AVANT (tÃ¢che monolithique)              APRÃˆS (micro-sprints)             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚
â”‚                                                                              â”‚
â”‚   "ImplÃ©menter le systÃ¨me de cache"       Sprint 1 (parallÃ¨le):            â”‚
â”‚                                           â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â†’ 1 agent travaille                     â”‚Cache  â”‚ â”‚Config â”‚ â”‚Tests  â”‚    â”‚
â”‚     pendant longtemps                     â”‚Model  â”‚ â”‚File   â”‚ â”‚Setup  â”‚    â”‚
â”‚   â†’ Risque d'erreurs                      â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚   â†’ Pas de validation intermÃ©diaire                                         â”‚
â”‚                                           Sprint 2 (parallÃ¨le):            â”‚
â”‚                                           â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚                                           â”‚Serviceâ”‚ â”‚API    â”‚ â”‚Docs   â”‚    â”‚
â”‚                                           â”‚Layer  â”‚ â”‚Integ. â”‚ â”‚Update â”‚    â”‚
â”‚                                           â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚                                           â†’ Validation aprÃ¨s chaque sprint  â”‚
â”‚                                           â†’ Erreurs dÃ©tectÃ©es tÃ´t           â”‚
â”‚                                           â†’ 6x plus rapide (parallÃ¨le)      â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Concept : Le "Devil's Advocate"

**RÃ´le** : Challenger systÃ©matiquement le plan ou le code pour trouver les failles.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚   SANS Devil's Advocate:                  AVEC Devil's Advocate:            â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚
â”‚                                                                              â”‚
â”‚   DÃ©veloppeur: "Mon plan est bon!"        DÃ©veloppeur: "Mon plan est bon!" â”‚
â”‚                                                                              â”‚
â”‚   IA: "Oui, c'est bien."                  Devil's Advocate:                 â”‚
â”‚                                           "Questions:                        â”‚
â”‚   â†’ Angles morts non dÃ©tectÃ©s              1. Que se passe-t-il si la       â”‚
â”‚   â†’ Bugs en production                        connexion DB Ã©choue ?         â”‚
â”‚                                            2. OÃ¹ est la gestion d'erreur ?  â”‚
â”‚                                            3. Test pour liste vide ?        â”‚
â”‚                                            4. Race condition possible ici"  â”‚
â”‚                                                                              â”‚
â”‚                                           â†’ Failles dÃ©tectÃ©es avant code    â”‚
â”‚                                           â†’ QualitÃ© amÃ©liorÃ©e               â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Revue de Code ScalÃ©e (NOUVEAU)

La rÃ¨gle `.cursor/rules/code-review-scaled.md` dÃ©finit un workflow de revue qui s'adapte Ã  la taille des changements.

#### DÃ©clenchement Automatique

| Taille | CritÃ¨res | Comportement |
|--------|----------|--------------|
| **Petit** | < 100 lignes, < 5 fichiers | Pas de revue auto |
| **Moyen** | 100-500 lignes OU 5-15 fichiers | Tests + Revue avant livraison |
| **Gros** | > 500 lignes OU > 15 fichiers | Tests + Revue obligatoire |

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WORKFLOW REVUE AUTOMATIQUE (Moyen/Gros changements)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   1. Code terminÃ©                                                           â”‚
â”‚          â”‚                                                                   â”‚
â”‚          â–¼                                                                   â”‚
â”‚   2. DÃ©tection taille: git diff --stat                                      â”‚
â”‚          â”‚                                                                   â”‚
â”‚          â”œâ”€â”€ Petit (< 100 lignes) â†’ Livrer directement                      â”‚
â”‚          â”‚                                                                   â”‚
â”‚          â–¼ Moyen/Gros                                                       â”‚
â”‚   3. Lancer pytest sur modules impactÃ©s                                     â”‚
â”‚          â”‚                                                                   â”‚
â”‚          â”œâ”€â”€ âŒ Tests Ã©chouent â†’ Corriger d'abord                           â”‚
â”‚          â”‚                                                                   â”‚
â”‚          â–¼ âœ… Tests passent                                                 â”‚
â”‚   4. Lancer revue (3-12 agents parallÃ¨les selon taille)                     â”‚
â”‚          â”‚                                                                   â”‚
â”‚          â”œâ”€â”€ ğŸ”´ Signal Fort â†’ Corriger avant livraison                      â”‚
â”‚          â”‚                                                                   â”‚
â”‚          â–¼ âœ… Pas de bloquant                                               â”‚
â”‚   5. Livrer (considÃ©rer comme terminÃ©)                                      â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Scaling des Agents de Revue

| Taille Changement | Agents | StratÃ©gie |
|-------------------|--------|-----------|
| Petit (< 10 fichiers) | 3-4 | Par prÃ©occupation (conformitÃ©, bugs, smells) |
| Moyen (10-25 fichiers) | 6-8 | Mixte prÃ©occupation + slice vertical |
| Gros (> 25 fichiers) | 8-12 | Slices verticaux + agents dÃ©diÃ©s bugs/sÃ©curitÃ© |

#### PrÃ©occupations VÃ©rifiÃ©es

| PrÃ©occupation | Focus |
|---------------|-------|
| Edge Cases | Null, vide, limites |
| Code Mort | Fonctions non utilisÃ©es |
| Erreurs | Fallbacks, exceptions |
| ConformitÃ© | CLAUDE.md, patterns DuckDB |
| Bugs Logiques | Conditions, off-by-one |
| SÃ©curitÃ© | Tokens, SQL injection |
| Code Smells | ComplexitÃ©, duplication |

#### Output

```markdown
## Code Review (scope: branch, 15 fichiers)

### Signal Fort (bloquant)
- [SÃ‰CURITÃ‰] Token exposÃ© dans logs â€” `sync.py:142`

### Signal Moyen (recommandÃ©)  
- [PATTERN] SQLite direct au lieu de DuckDBRepository â€” `page.py:88`

### Signal Faible (optionnel)
- [IDIOME] F-string prÃ©fÃ©rable â€” `helper.py:23`

---
TrouvÃ© 3 issues: 1 fort, 1 moyen, 1 faible.
```

### Structure des Fichiers d'Orchestration

```
.cursor/
â”œâ”€â”€ rules/
â”‚   â”œâ”€â”€ pm-orchestrator.md        â† DÃ©finition du rÃ´le PM
â”‚   â”œâ”€â”€ multi-agent-orchestration.md  â† Protocole complet
â”‚   â”œâ”€â”€ fagan-reviewer.md         â† MÃ©thodologie Fagan
â”‚   â”œâ”€â”€ code-review-scaled.md     â† Revue scalÃ©e (NOUVEAU)
â”‚   â””â”€â”€ output-style.md           â† Style de communication
â”‚
â”œâ”€â”€ commands/
â”‚   â”œâ”€â”€ pm.md                     â† Commande /pm
â”‚   â”œâ”€â”€ orchestrate-audit.md      â† Commande /orchestrate-audit
â”‚   â”œâ”€â”€ orchestrate-implement.md  â† Commande /orchestrate-implement
â”‚   â””â”€â”€ orchestrate-full.md       â† Commande /orchestrate-full

.ai/
â”œâ”€â”€ sprints/
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ backlog.md                â† Issues Ã  traiter
â”‚   â””â”€â”€ micro-sprints/
â”‚       â”œâ”€â”€ sprint-001.md
â”‚       â””â”€â”€ sprint-002.md
â”‚
â”œâ”€â”€ reports/
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ audit-final.md
â”‚   â”œâ”€â”€ security-audit.md
â”‚   â””â”€â”€ devils-advocate.md
â”‚
â”œâ”€â”€ references/                   â† Docs "best practices" vÃ©rifiÃ©es
â”‚   â””â”€â”€ README.md
â”‚
â””â”€â”€ ORCHESTRATION_PROMPTS.md      â† Prompts prÃªts Ã  copier-coller
```

### Exemple Concret : Ajouter une Feature

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  VOUS: "Ajoute un cache pour les profils joueurs"                           â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  /pm                                                                â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                              â”‚
â”‚  PM (Opus):                                                                 â”‚
â”‚    1. [Analyse] Lit .ai/project_map.md                                      â”‚
â”‚    2. [DÃ©cision] Feature complexe â†’ dÃ©lÃ©guer                                â”‚
â”‚                                                                              â”‚
â”‚    Batch 1 (parallÃ¨le):                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚    â”‚tdd-discovery â”‚  â”‚requirements- â”‚                                       â”‚
â”‚    â”‚              â”‚  â”‚architect     â”‚                                       â”‚
â”‚    â”‚"Quels tests  â”‚  â”‚"Comment      â”‚                                       â”‚
â”‚    â”‚ existent?"   â”‚  â”‚ structurer?" â”‚                                       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚                    â–¼                                                        â”‚
â”‚    PM consolide les rapports                                                â”‚
â”‚                                                                              â”‚
â”‚    Batch 2 (parallÃ¨le):                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚    â”‚Implementorâ”‚  â”‚Implementorâ”‚  â”‚tech-doc-  â”‚                             â”‚
â”‚    â”‚cache.py   â”‚  â”‚service.py â”‚  â”‚writer     â”‚                             â”‚
â”‚    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                         â–¼                                                   â”‚
â”‚    PM valide + lance tests                                                  â”‚
â”‚                                                                              â”‚
â”‚    Batch 3 (parallÃ¨le):                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚    â”‚security-      â”‚  â”‚devils-        â”‚                                     â”‚
â”‚    â”‚specialist     â”‚  â”‚advocate       â”‚                                     â”‚
â”‚    â”‚"Cache sÃ»r?"   â”‚  â”‚"Et si...?"    â”‚                                     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚                       â–¼                                                     â”‚
â”‚    PM gÃ©nÃ¨re le rapport final                                               â”‚
â”‚    Met Ã  jour .ai/thought_log.md                                            â”‚
â”‚                                                                              â”‚
â”‚  RÃ‰SULTAT: Feature implÃ©mentÃ©e, testÃ©e, documentÃ©e, sÃ©curisÃ©e              â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### RÃ©sumÃ© pour les Novices

| Concept | Explication Simple |
|---------|-------------------|
| **PM Orchestrator** | Le chef de projet IA qui coordonne le travail |
| **Sub-agents** | Les "employÃ©s" IA qui font les tÃ¢ches |
| **Micro-sprints** | Petites tÃ¢ches parallÃ©lisables |
| **Fagan Inspection** | MÃ©thode rigoureuse de revue de code |
| **Devil's Advocate** | L'IA qui joue le pessimiste pour trouver les bugs |
| **Context Management** | Garder la "mÃ©moire" de l'IA propre |

**Pour dÃ©marrer** : Tapez simplement `/pm` dans un nouveau chat !

---

## 4. Serveurs MCP (Model Context Protocol)

### Architecture MCP

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          CURSOR IDE                                     â”‚
â”‚                                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                        AGENT CLAUDE                              â”‚  â”‚
â”‚   â”‚                                                                  â”‚  â”‚
â”‚   â”‚   CallMcpTool("user-duckdb", "query", {sql: "..."})             â”‚  â”‚
â”‚   â”‚   CallMcpTool("halo-rag", "search_knowledge", {...})            â”‚  â”‚
â”‚   â”‚                              â”‚                                   â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                  â”‚                                      â”‚
â”‚                                  â–¼                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                    MCP PROTOCOL LAYER                             â”‚  â”‚
â”‚   â”‚              (JSON-RPC over stdio)                                â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                  â”‚                                      â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚       â–¼                â–¼                  â–¼                 â–¼          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚ DuckDB  â”‚    â”‚ Halo    â”‚       â”‚  Browser    â”‚    â”‚ Browser â”‚      â”‚
â”‚   â”‚ Server  â”‚    â”‚  RAG    â”‚       â”‚    IDE      â”‚    â”‚Extensionâ”‚      â”‚
â”‚   â”‚         â”‚    â”‚         â”‚       â”‚             â”‚    â”‚         â”‚      â”‚
â”‚   â”‚user-    â”‚    â”‚ halo-   â”‚       â”‚ cursor-ide- â”‚    â”‚cursor-  â”‚      â”‚
â”‚   â”‚duckdb   â”‚    â”‚  rag    â”‚       â”‚ browser     â”‚    â”‚browser  â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â”‚
â”‚        â”‚              â”‚                   â”‚                 â”‚          â”‚
â”‚        â–¼              â–¼                   â–¼                 â–¼          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚ SQLite  â”‚    â”‚ChromaDB â”‚       â”‚  Chromium   â”‚    â”‚ Chrome  â”‚      â”‚
â”‚   â”‚ Parquet â”‚    â”‚ Vector  â”‚       â”‚  (headless) â”‚    â”‚Extensionâ”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Serveurs ConfigurÃ©s

#### 1. Halo RAG (`halo-rag`) - NOUVEAU

**Description** : Base de connaissances vectorielle pour l'API Halo et le projet.

**Configuration** (`.cursor/mcp.json`) :
```json
{
  "mcpServers": {
    "halo-rag": {
      "command": "python",
      "args": ["-m", "src.ai.mcp_server"],
      "disabled": true
    }
  }
}
```

**Outils disponibles** :
| Outil | Description |
|-------|-------------|
| `search_knowledge` | Recherche sÃ©mantique dans la base |
| `get_api_doc` | Documentation d'un endpoint/concept API |
| `get_context` | GÃ©nÃ¨re un contexte pour prompt LLM |
| `index_file` | Indexe un fichier local |
| `get_stats` | Statistiques de la base |

**Sources indexÃ©es** :
- `docs/` : Documentation locale
- `.ai/` : Contexte agentique
- `src/` : Code source Python
- GitHub `dend/grunt` : API wrapper Halo Infinite

**Usage** :
```python
# Recherche dans la base de connaissances
CallMcpTool("halo-rag", "search_knowledge", {
    "query": "Comment fonctionne l'authentification Spartan Token?"
})

# Obtenir la doc d'un endpoint
CallMcpTool("halo-rag", "get_api_doc", {
    "topic": "career rank progression"
})
```

**Installation** :
```bash
pip install chromadb httpx
python scripts/index_knowledge_base.py
# Puis activer dans .cursor/mcp.json : "disabled": false
```

---

#### 2. DuckDB (`user-duckdb`)

**Configuration** (`.cursor/mcp.json`) :
```json
{
  "mcpServers": {
    "duckdb": {
      "command": "duckdb-mcp-server.exe",
      "args": ["--db-path", ":memory:"]
    }
  }
}
```

**Outils disponibles** :
| Outil | Description |
|-------|-------------|
| `query` | ExÃ©cuter une requÃªte SQL |
| `analyze_schema` | Analyser structure des donnÃ©es |
| `analyze_data` | Statistiques sur les donnÃ©es |
| `create_session` | CrÃ©er session DuckDB persistante |
| `suggest_visualizations` | SuggÃ©rer des visualisations |

**Usage typique** :
```sql
-- Jointure Parquet + SQLite
ATTACH 'data/warehouse/metadata.db' AS meta (TYPE sqlite);

SELECT p.name_fr as playlist, COUNT(*) as matches
FROM read_parquet('data/warehouse/match_facts/**/*.parquet') f
JOIN meta.playlists p ON f.playlist_id = p.uuid
GROUP BY p.name_fr;
```

#### 2. Browser IDE (`cursor-ide-browser`)

**Usage** : Tests frontend/webapp, interaction avec pages web

**Workflow** :
```
browser_navigate(url)
        â”‚
        â–¼
browser_lock()          â† Verrouille l'onglet pour interactions
        â”‚
        â–¼
browser_snapshot()      â† Capture Ã©tat de la page
        â”‚
        â–¼
browser_click/fill/...  â† Interactions
        â”‚
        â–¼
browser_unlock()        â† LibÃ¨re l'onglet
```

**Outils clÃ©s** :
- `browser_navigate` : Navigation vers URL
- `browser_snapshot` : Capture structure DOM
- `browser_click` / `browser_fill` : Interactions
- `browser_tabs` : Gestion onglets

#### 3. Browser Extension (`cursor-browser-extension`)

Similaire au Browser IDE mais utilise l'extension Chrome installÃ©e.

---

## 5. Pre-commit Hooks

### Pipeline de Hooks

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            git commit                                    â”‚
â”‚                                â”‚                                         â”‚
â”‚                                â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    PRE-COMMIT HOOKS                               â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚   â”‚   QUALITÃ‰       â”‚   â”‚   SÃ‰CURITÃ‰      â”‚   â”‚  VALIDATION  â”‚   â”‚   â”‚
â”‚  â”‚   â”‚                 â”‚   â”‚                 â”‚   â”‚              â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ â€¢ ruff          â”‚   â”‚ â€¢ detect-       â”‚   â”‚ â€¢ validate-  â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ â€¢ ruff-format   â”‚   â”‚   secrets       â”‚   â”‚   models     â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ â€¢ trailing-ws   â”‚   â”‚ â€¢ detect-       â”‚   â”‚ â€¢ check-ast  â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ â€¢ end-of-file   â”‚   â”‚   private-key   â”‚   â”‚ â€¢ check-     â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ â€¢ check-yaml    â”‚   â”‚                 â”‚   â”‚   imports    â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ â€¢ check-json    â”‚   â”‚                 â”‚   â”‚              â”‚   â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚            â”‚                     â”‚                    â”‚           â”‚   â”‚
â”‚  â”‚            â–¼                     â–¼                    â–¼           â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚   â”‚              âœ“ PASS â†’ Commit autorisÃ©                     â”‚   â”‚   â”‚
â”‚  â”‚   â”‚              âœ— FAIL â†’ Commit bloquÃ© + message             â”‚   â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚                                â”‚                                         â”‚
â”‚                                â–¼                                         â”‚
â”‚                            git push                                      â”‚
â”‚                                â”‚                                         â”‚
â”‚                                â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     PRE-PUSH HOOKS                                â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚   â”‚ pytest-fast: pytest tests/ -x -q -m "not slow"          â”‚    â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Hooks ConfigurÃ©s

#### Pre-Commit (Ã  chaque commit)

| Hook | Description | Auto-fix |
|------|-------------|----------|
| `ruff` | Linting Python (imports, bugs, style) | âœ“ `--fix` |
| `ruff-format` | Formatage code Python | âœ“ |
| `trailing-whitespace` | Supprime espaces en fin de ligne | âœ“ |
| `end-of-file-fixer` | Newline en fin de fichier | âœ“ |
| `check-yaml/json/toml` | Validation syntaxe | âœ— |
| `debug-statements` | DÃ©tecte `print()`, `pdb`, `breakpoint()` | âœ— |
| `detect-secrets` | DÃ©tecte secrets/clÃ©s accidentels | âœ— |
| `validate-models` | Valide modÃ¨les Pydantic | âœ— |
| `check-imports` | DÃ©tecte imports circulaires | âœ— |

#### Pre-Push (avant push)

| Hook | Description |
|------|-------------|
| `pytest-fast` | Tests unitaires rapides (exclu slow/integration) |

### Installation

```bash
pip install pre-commit
pre-commit install                      # Active pre-commit hooks
pre-commit install --hook-type pre-push  # Active pre-push hooks
```

---

## 6. Fichiers de Contexte Agentique (`.ai/`)

### Structure des Fichiers `.ai/`

```
.ai/
 â”‚
 â”œâ”€â”€ project_map.md      â† Cartographie modules et dÃ©pendances
 â”‚
 â”œâ”€â”€ thought_log.md      â† Journal des dÃ©cisions (pour passation)
 â”‚
 â”œâ”€â”€ data_lineage.md     â† Flux de donnÃ©es JSONâ†’SQLiteâ†’Parquet
 â”‚
 â”œâ”€â”€ current_plan.md     â† Plan d'implÃ©mentation en cours
 â”‚
 â”œâ”€â”€ workflows.md        â† Documentation workflows
 â”‚
 â”œâ”€â”€ MCP_CONFIG.md       â† Configuration serveurs MCP
 â”‚
 â””â”€â”€ features/           â† Documentation par fonctionnalitÃ©
     â”œâ”€â”€ README.md
     â”œâ”€â”€ cache.md
     â””â”€â”€ ...
```

### Cycle de Vie Agent

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DÃ‰BUT DE SESSION                                    â”‚
â”‚                            â”‚                                             â”‚
â”‚                            â–¼                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  1. Lire CLAUDE.md (instructions gÃ©nÃ©rales)                     â”‚    â”‚
â”‚   â”‚  2. Lire .ai/project_map.md (architecture)                      â”‚    â”‚
â”‚   â”‚  3. Lire .ai/thought_log.md (dÃ©cisions prÃ©cÃ©dentes)             â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                             â”‚
â”‚                            â–¼                                             â”‚
â”‚                       TRAVAIL                                            â”‚
â”‚                            â”‚                                             â”‚
â”‚                            â–¼                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  4. Mettre Ã  jour .ai/ aprÃ¨s modifications significatives       â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                             â”‚
â”‚                            â–¼                                             â”‚
â”‚                      FIN DE SESSION                                      â”‚
â”‚                            â”‚                                             â”‚
â”‚                            â–¼                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  5. /handoff â†’ Documenter pour prochain agent                   â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## RÃ©sumÃ© Rapide

### Infrastructure

| Composant | Fichier/Chemin | RÃ´le |
|-----------|----------------|------|
| Sous-agents Cursor | Tool `Task` | DÃ©lÃ©gation tÃ¢ches (explore, generalPurpose) |
| MCP DuckDB | `.cursor/mcp.json` | RequÃªtes SQL sur donnÃ©es Halo |
| MCP Browser | IntÃ©grÃ© Cursor | Tests frontend |
| Pre-commit | `.pre-commit-config.yaml` | QualitÃ© code automatique |
| Contexte | `.ai/*.md` | MÃ©moire persistante entre sessions |

### Agents SpÃ©cialisÃ©s (Commandes Custom)

| Agent | Commande | RÃ´le | ChaÃ®nage |
|-------|----------|------|----------|
| ğŸ¯ **Orchestrateur** | `/orchestrate` | **Point d'entrÃ©e - Analyse et dÃ©lÃ¨gue** | â†’ Tous |
| ğŸ“‹ Planification | `/plan` | Planifier avant coder | â†’ `/implement` |
| ğŸ”¨ ImplÃ©mentation | `/implement` | Coder avec checklist | â†’ `/test` |
| ğŸ§ª Tests | `/test` | GÃ©nÃ©rer/exÃ©cuter tests | â†’ `/review` ou `/debug` |
| ğŸ” Revue | `/review` | ContrÃ´le qualitÃ© code | â†’ Merge |
| ğŸ› DÃ©bogage | `/debug` | Investigation bugs | â†’ `/test` |
| ğŸ—ºï¸ Exploration | `/explore-feature` | Documenter feature | Support |
| ğŸ“¥ Ingestion | `/ingest` | Charger donnÃ©es Halo | Support |
| ğŸ” Query | `/query-halo` | RequÃªtes DuckDB | Support |
| âœ… VÃ©rification | `/verify-db` | IntÃ©gritÃ© donnÃ©es | Support |
| ğŸ“ Contexte | `/update-context` | MAJ fichiers .ai/ | Support |
| ğŸ”„ Passation | `/handoff` | Fin de session | Transition |

### Workflow Typique

```
                    /orchestrate
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼               â–¼               â–¼
      FEATURE          BUG           QUESTION
         â”‚               â”‚               â”‚
         â–¼               â–¼               â–¼
      /plan          /debug      /explore-feature
         â”‚               â”‚
         â–¼               â”‚
    /implement           â”‚
         â”‚               â”‚
         â–¼               â”‚
      /test â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
      /review
         â”‚
         â–¼
      /handoff
```

---

*DerniÃ¨re mise Ã  jour : 2026-02-02*
